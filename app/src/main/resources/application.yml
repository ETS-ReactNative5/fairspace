app:
  oauth2:
    base-url: http://localhost:9080
    realm: keycloak
    logout-url: ${app.oauth2.base-url}/auth/realms/${app.oauth2.realm}/protocol/openid-connect/logout?redirect_uri=%s
    redirect-after-logout-url: https://fairspace.com
    required-authority: user-workspace

  # Specify urls for security configuration. There are
  urls:
    permitAll:
    - /actuator/health
    - /error
    - /manifest.json
    needsAuthentication:
    - /account/name
    needsAuthorization:
    - /account/authorizations
    - /storage
    - /metadata

security:
  oauth2:
    client:
      clientId: web_app
      clientSecret: web_app
      user-authorization-uri: ${app.oauth2.base-url}/auth/realms/${app.oauth2.realm}/protocol/openid-connect/auth
      access-token-uri: ${app.oauth2.base-url}/auth/realms/${app.oauth2.realm}/protocol/openid-connect/token
      authentication-scheme: header
      scope: openid
    resource:
      user-info-uri: ${app.oauth2.base-url}/auth/realms/${app.oauth2.realm}/protocol/openid-connect/userinfo
      prefer-token-info: false

zuul:
  routes:
    storage:
      path: /storage/**
      url: http://hydra/
    metadata:
      path: /metadata/**
      url: http://neptune/
    ui:
      path: /**
      url: http://mercury/
  ignored-headers:
  - Access-Control-Allow-Credentials
  - Access-Control-Allow-Origin
  ignored-patterns:
  - /actuator/**
  - /account/**
  - /login
  - /logout


management:
  endpoints:
    enabled-by-default: false
    info.enabled: true
    health.enabled: true
  metrics:
    enabled: false
    export:
      simple.enabled: false
    binders:
      files.enabled: false
      integration.enabled: false
      jvm.enabled: false
      logback.enabled: false
      processor.enabled: false
      uptime.enabled: false

spring:
  servlet.multipart.enabled: false
  application.admin.enabled: false
  jmx.enabled: false