# 0 - IRI
# 1 - deleted by

PREFIX fs: <http://fairspace.io/ontology#>

# Delete files and folders
INSERT { ?s fs:dateDeleted ?date; fs:deletedby ?1. } WHERE {
?0 fs:filePath ?collPath;
a fs:Collection.
?s ?p ?o;
fs:filePath ?path .
FILTER(STRSTARTS(?path, CONCAT(?collPath, '/')))
BIND(NOW() as ?date)
};

# Delete the collection
INSERT { ?0 fs:dateDeleted ?date; }
WHERE { ?0 a fs:Collection. BIND(NOW() as ?date)};
